angular.module("image.text",[]).service("text",["$rootScope","canvas",function(t,e){var i={removeTextFromCanvas:function(t){t||(t=e.fabric.getActiveObject()),t.setFontSize&&(e.fabric.remove(t),e.fabric.renderAll())},getTextObject:function(){var t=e.fabric.getActiveObject();if(t&&t.fontFamily)return t;if(!t||!t.fontFamily)for(var i=e.fabric.getObjects(),n=0;n<i.length;n++)if(i[n].fontFamily)return i[n]},toggleTextDecoration:function(t){var i=this.getTextObject(),n=i.textDecoration.trim();"italic"==t?i.fontStyle.indexOf("italic")>-1?i.setFontStyle("normal"):i.setFontStyle("italic"):(n.indexOf(t)>-1?n=n.replace(t,"").trim():n+=" "+t,i.setTextDecoration&&i.setTextDecoration(n)),e.fabric.renderAll();var r=i.fontStyle+" "+i.textDecoration.trim();return r.split(" ")},setProperty:function(t,i){var n=this.getTextObject(),r=this.makeSetterName(t);n[r]&&n[r](i),e.fabric.renderAll()},toggleProperty:function(t,i){var n=this.getTextObject(),r=this.makeSetterName(t);n[r]&&n[r](i),e.fabric.renderAll()},makeSetterName:function(t){return"set"+t.charAt(0).toUpperCase()+t.slice(1)}};return i}]);