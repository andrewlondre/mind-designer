"use strict";angular.module("ImageEditor").controller("ZoomController",["$rootScope","$scope","canvas",function(e,t,i){t.canvas=i,t.zoom=1,t.maxScale=200,t.minScale=30,e.$on("editor.mainImage.loaded",function(){t.fitToScreen()}),e.$on("canvas.openedNew",function(){t.fitToScreen()}),t.$watch("canvas.currentZoom",function(e){var i=100*e;i!==t.zoom&&(t.zoom=i)}),t.fitToScreen=function(){if(t.zoom=100*i.currentZoom,i.mainImage)var e=i.mainImage.originalState.width,n=i.mainImage.originalState.height;else var e=i.original.width,n=i.original.height;var r=100*Math.min(3582/n,5731/e),o=100*Math.min(141/n,211/e);t.maxScale=Math.ceil(r),t.minScale=Math.ceil(o),i.zoom(i.currentZoom)},e.$on("history.loaded",function(){t.zoom=100*i.currentScale}),t.doZoom=function(){i.zoom(t.zoom/100)},t.getCurrentZoom=function(){return Math.round(100*i.currentZoom)}}]);