angular.module("ImageEditor").directive("edObjectsPanelSortable",["$rootScope","canvas",function(t,e){return{link:function(i,n){var s;n.sortable({items:".object:visible",scroll:!1,containment:"parent",start:function(t,e){e.item.data("start",e.item.index())},update:function(n,r){var o=r.item.data("start"),a=r.item.index();if(e.fabric._objects.splice(a,0,e.fabric._objects.splice(o,1)[0]),i.objects=e.fabric._objects,i.$apply(),console.log(i.objects),s=e.fabric.getObjects()[o]){if(a>o)for(var l=0;a-o>l;l++)e.fabric.bringForward(s);else for(var l=0;o-a>l;l++)e.fabric.sendBackwards(s);t.$apply(function(){e.fabric.renderAll(),o=!1})}}})}}}]);