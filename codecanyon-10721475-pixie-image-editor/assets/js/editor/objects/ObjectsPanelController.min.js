angular.module("ImageEditor").controller("ObjectsPanelController",["$scope","$rootScope","$timeout","canvas",function(t,e,i,n){t.objects=n.fabric._objects||[],t.sortableOptions={items:".object:visible",scroll:!1,containment:"parent",start:function(t,e){e.item.data("start",e.item.index())},update:function(t,e){var r=e.item.data("start"),o=e.item.index();if(obj=n.fabric.getObjects()[r],obj){if(o>r)for(var s=0;o-r>s;s++)n.fabric.bringForward(obj);else for(var s=0;r-o>s;s++)n.fabric.sendBackwards(obj);i(function(){n.fabric.renderAll(),r=!1,o=!1})}}},t.setAsActive=function(t){t&&n.fabric.setActiveObject(t)},t.toggleVisibility=function(t){t&&(t.visible?t.set({visible:!1,evented:!1,selectable:!1,hasBorders:!1,hasCorners:!1}):(t.set({visible:!0,evented:!0,selectable:!0,hasBorders:!0,hasCorners:!0}),n.fabric.setActiveObject(t)),n.fabric.renderAll())},t.deleteObject=function(t){t&&(n.fabric.remove(t),n.fabric.renderAll())},t.toggleLock=function(t){t&&(t.locked?(t.set({locked:!1,selectable:!0,evented:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,hasControls:!0,hasBorders:!0}),n.fabric.setActiveObject(t)):t.set({locked:!0,selectable:!1,evented:!1,lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0,hasControls:!1,hasBorders:!1}),n.fabric.renderAll())}}]);