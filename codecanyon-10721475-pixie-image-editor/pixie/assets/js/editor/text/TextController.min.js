angular.module("image.text").controller("TextController",["$scope","$rootScope","$timeout","canvas","text","fonts",function(t,e,i,n,r,o){t.text=r,t.fonts=o,t.opacity=1,t.fontSize=25,t.enableOutline=!0,t.filters={category:"handwriting",family:""},t.isPanelEnabled=function(){var t=n.fabric.getActiveObject();return t&&"text"===t.name&&"text"===e.activeTab},t.changeFont=function(t,i){var o=n.fabric.getActiveObject();if(e.openPanel("text",i),!o||"text"!==o.name){var s=new fabric.IText("Double click me to edit my contents.",{fontWeight:400,fontSize:28/n.currentZoom,fill:"#fff",removeOnCancel:!0,name:"text"});n.fabric.add(s),s.setTop(25),s.setLeft(25),n.fabric.setActiveObject(s),n.fabric.renderAll()}r.setProperty("fontFamily",t)},t.cancelAddingTextToCanvas=function(){var t=r.getTextObject();t.removeOnCancel&&r.removeTextFromCanvas(t),e.activePanel=!1},t.finishAddingTextToCanvas=function(){var t=r.getTextObject();e.activePanel=!1,e.$emit("text.added",t),n.fabric.setActiveObject(n.mainImage),o.createLinkToFont(t.fontFamily)},e.$on("tab.changed",function(e,i){if("text"==i){var r=t.text.getTextObject();r&&(r.removeOnCancel=!1,n.fabric.setActiveObject(r))}}),o.getAll(t.filters)}]);